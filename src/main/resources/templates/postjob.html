<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Post a Job</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f3f6fa;
            font-family: 'Poppins', sans-serif;
        }
        .post-job-container {
            max-width: 550px;
            margin: 80px auto;
            background: white;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            animation: fadeInUp 0.8s ease-in-out;
        }
        .post-job-container h3 {
            text-align: center;
            color: #0d6efd;
            font-weight: 600;
            margin-bottom: 25px;
        }
        .form-control, textarea {
            border-radius: 10px;
            transition: all 0.2s ease-in-out;
        }
        .form-control:focus, textarea:focus {
            border-color: #0d6efd;
            box-shadow: 0 0 6px rgba(13, 110, 253, 0.3);
        }
        button {
            border-radius: 10px;
            transition: all 0.3s ease-in-out;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(13, 110, 253, 0.3);
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        label { font-weight: 500; color: #333; }
        footer {
            text-align: center;
            color: #777;
            margin-top: 60px;
            font-size: 0.9rem;
        }
        .error-message {
            color: red;
            font-size: 0.85rem;
            margin-top: 3px;
        }
    </style>
</head>

<body>
<div class="post-job-container">
    <h3>Post New Job</h3>

    <!-- ✅ Bind to 'jobNew' and send to '/JobFair/saveJob' -->
    <form th:action="@{/JobFair/saveJob}" th:object="${jobNew}" method="post" onsubmit="return validateForm()">

        <div class="mb-3">
            <label>Job Title</label>
            <input type="text" th:field="*{title}" id="title" class="form-control" placeholder="e.g. Frontend Developer" required>
            <div id="titleError" class="error-message"></div>
        </div>

        <div class="mb-3">
            <label>Description</label>
            <textarea th:field="*{description}" id="description" class="form-control" rows="3"
                      placeholder="Write about the job role..." required></textarea>
            <div id="descriptionError" class="error-message"></div>
        </div>

        <div class="mb-3">
            <label>Eligibility</label>
            <input type="text" th:field="*{eligibility}" id="eligibility" class="form-control"
                   placeholder="Qualification, Experience etc." required>
            <div id="eligibilityError" class="error-message"></div>
        </div>

        <div class="mb-3">
            <label>Location</label>
            <input type="text" th:field="*{location}" id="location" class="form-control" placeholder="e.g. Bengaluru, Remote" required>
            <div id="locationError" class="error-message"></div>
        </div>

        <div class="mb-3">
            <label>Salary (in ₹)</label>
            <input type="text" th:field="*{salary}" id="salary" class="form-control" placeholder="Enter salary amount" required>
            <div id="salaryError" class="error-message"></div>
        </div>

        <div class="text-center">
            <button class="btn btn-primary w-100 py-2" type="submit">Post Job</button>
        </div>
    </form>
</div>

<footer>
    © 2025 Online Job Fair Portal | Designed by ARHIT | SUDHANSHU | KRISHNA | VANSH | ARJUN
</footer>

<script>
    function validateForm() {
        let valid = true;
        document.querySelectorAll(".error-message").forEach(e => e.textContent = "");

        const title = document.getElementById("title").value.trim();
        const description = document.getElementById("description").value.trim();
        const eligibility = document.getElementById("eligibility").value.trim();
        const location = document.getElementById("location").value.trim();
        const salary = document.getElementById("salary").value.trim();

        if (title === "") { document.getElementById("titleError").textContent = "Job title is required."; valid = false; }
        if (description === "") { document.getElementById("descriptionError").textContent = "Description is required."; valid = false; }
        if (eligibility === "") { document.getElementById("eligibilityError").textContent = "Eligibility is required."; valid = false; }
        if (location === "") { document.getElementById("locationError").textContent = "Location is required."; valid = false; }
        if (salary === "") {
            document.getElementById("salaryError").textContent = "Salary is required."; valid = false;
        } else if (!/^[0-9]+$/.test(salary)) {
            document.getElementById("salaryError").textContent = "Salary must be a valid number."; valid = false;
        }

        return valid;
    }
</script>
</body>
</html>
